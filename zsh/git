function git_commit() {
  command git commit "$@"
  exit_status=$?
  if [ $exit_status -eq 0 ]; then
    echo "Commit successful! Running additional tasks..."
    ascii-commit-graph --full-width --show-todos --show-issues
    open -g raycast://extensions/raycast/raycast/confetti
  else
    echo "Commit failed! Running error handling tasks..."
  fi
  return $exit_status
}

function git_push() {
  command git push "$@"
  exit_status=$?
  if [ $exit_status -eq 0 ]; then
    echo "Push successful! Running additional tasks..."
    ascii-commit-graph --full-width --show-todos --show-issues
    open -g raycast://extensions/raycast/raycast/confetti
  else
    echo "Push failed! Running error handling tasks..."
  fi
  return $exit_status
}

function git_() {
  subcommand=$1
  shift  # Remove the subcommand from the arguments

  case "$subcommand" in
    commit)
      git_commit "$@"
      ;;
    push)
      git_push "$@"
      ;;
    *)
      command git "$subcommand" "$@"
      ;;
  esac
}

alias git='noglob git_'

function git_commit_push() {
  # if not $1 then use --allow-empty-message argument
  # if no changes then add --allow-empty argument
  # first check if there are any changes

  git add .

  if [[ -n $(git status -s) ]]; then
    git commit -am "${1:---allow-empty-message}"
    git push
  else
    git commit --allow-empty -m "${1:---allow-empty-message}"
    git push
  fi

  ascii-commit-graph --full-width --show-todos --show-issues
  /usr/local/bin/win
}

alias gitcp=git_commit_push